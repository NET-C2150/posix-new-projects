2005-02-07  Jonathan Pryor  <jonpryor@vt.edu>

	* grp.c, pwd.c: Clear errno before calling the actual calls, as errno may
	  have a stale value, leading to spurious errors later.  Fixes #72292.

2005-02-03  Jonathan Pryor  <jonpryor@vt.edu>

	* Makefile.am (MPH_C_SOURCE): Move errno.c into MPH_C_SOURCE, so it's built
	  on Windows as well as Unix.

2005-02-03  Jonathan Pryor  <jonpryor@vt.edu>

	* errno.c: Mono_Posix_Syscall_SetLastError should be in Stdlib, not Syscall, 
	  since it's part of ANSI C (and errno will be used from StdioFileStream).  
	  Add Mono_Posix_Stdlib_SetLastError.  Don't remove the Syscall version, as 
	  we don't want to break Mono 1.1.4/svn users the day after release. :-)

2005-01-25  Jonathan Pryor  <jonpryor@vt.edu>

	* macros.c: Use gint64, not long, to match C# declaration.  Fixes 71152.

2005-01-23  Geoff Norton  <gnorton@customerdna.com>

	* dirent.c: Include <unistd.h> to bring off_t in on gcc4.0+OSX

2005-01-13  Jonathan Pryor  <jonpryor@vt.edu>

	* map.h: Correct Mono_Posix_OpenFlags values (they should now match 
	  x86 linux); remove unused enumerations (MountFlags, etc.).

2005-01-13  Jonathan Pryor  <jonpryor@vt.edu>

	* fstab.c: Fix HPUX support.  HPUX includes both <fstab.h> and
	  <checkpoint.h>, so we need to give preference to <checkpoint.h>.

2005-01-05  Jonathan Pryor  <jonpryor@vt.edu>

	* fstab.c: Add support for HPUX, which uses <checklist.h>.

2005-01-05  Jonathan Pryor  <jonpryor@vt.edu>

	* map.c: Continuing my ineptitude...  <sys/wait.h> isn't on Win32.
	* mph.h: Win32 doesn't define EOVERFLOW, either.  Define it.

2005-01-05  Jonathan Pryor  <jonpryor@vt.edu>

	* map.c: Include <config.h> so we can check for PLATFORM_WIN32.

2005-01-05  Jonathan Pryor  <jonpryor@vt.edu>

	* map.c: Fix Win32 build break.  Win32 doesn't have all the sys/* headers.

2005-01-05  Jonathan Pryor  <jonpryor@vt.edu>

	* serial.c: HPUX compiler fix.
	* stdlib.c: Add C-defined macro wrappers.

2005-01-04  Jonathan Pryor  <jonpryor@vt.edu>

	* stdio.c: Add wrapper for C99's snprintf(3).

2005-01-04  Jonathan Pryor  <jonpryor@vt.edu>

	* Makefile.am: Rewrite.  Remove configure-generated warnings about 
	  multiple _LIBADD and _SOURCES lines.  Add support for Win32.  
	  Win32 support is limited to ANSI C functions.
	* stdio.c: Don't compile Unix wrappers on Win32.

2005-01-04  Raja R Harinath  <rharinath@novell.com>

	* Makefile.am (LIBS): Remove.  Was overriding results of configure check.
	(libMonoPosixHelper_la_LIBADD): List $(GLIB_LIBS) here.

2005-01-04  Jonathan Pryor  <jonpryor@vt.edu>

	* Makefile.am: Add libnsl to LIBS.  Hopefully this will let sparc link.
	* mph.h: Make MPH_INTERNAL conditional on __GNUC__.

2005-01-03  Jonathan Pryor  <jonpryor@vt.edu>

	* signal.c, stdio.c: Remove "function declaration isn't a prototype" warnings.
	* unistd.c: Check for presence of gethostname and sethostname.

2005-01-03  Jonathan Pryor  <jonpryor@vt.edu>

	* mph.h, x-struct-str.c: Add "const" to parameters to remove 
	  "warning: passing arg [2|4]...discards qualifiers" message.

2005-01-03  Jonathan Pryor  <jonpryor@vt.edu>

	* fstab.c: Remove some sparc compiler warnings.

2005-01-03  Jonathan Pryor  <jonpryor@vt.edu>

	* fstab.c: Solaris doesn't support getfsent(3), but it provides equivalent
	  functionality in getvfsent(3C).  Implement Solaris support.

2005-01-02  Jonathan Pryor  <jonpryor@vt.edu>

	* stdio.c: More wrapper functions.  I missed a few macros...  This should
	  complete all macro's defined in <stdio.h> for C99.

2004-12-30  Jonathan Pryor  <jonpryor@vt.edu>

	* stdio.c: More wrapper functions.  This should complete C89's <stdio.h>
	  requirements.

2004-12-30  Jonathan Pryor  <jonpryor@vt.edu>

	* sys-statvfs.c: Further proving that changing code without compiling is
	  dangerous business...  Compiler fix for OS X.

2004-12-30  Jonathan Pryor  <jonpryor@vt.edu>

	* signal.c: Mac OS X portability fixes -- it doesn't provide sighandler_t!

2004-12-30  Jonathan Pryor  <jonpryor@vt.edu>

	* Makefile.am: Add signal.c to the build.
	* signal.c: Added.  Contains helper functions to wrap signal(2).

2004-12-30  Jonathan Pryor  <jonpryor@vt.edu>

	* sys-statvfs.c: Fix Mac OS X build (statfs.f_frsize doesn't exist on OSX;
	  f_fsid isn't an integral type; fstatfs needs to use fpathconf).

2004-12-29  Jonathan Pryor  <jonpryor@vt.edu>

	* unistd.c: Null-terminate the string returned by readlink(2).  This works
	  around a marshaler "issue".

2004-12-28  Jonathan Pryor  <jonpryor@vt.edu>

	* Makefile.am: Add GLIB_LIBS to the LIBS line, since we require linking
	  against glib-2.0 (to use g_assert()).

2004-12-28  Jonathan Pryor  <jonpryor@vt.edu>

	* fstab.c: Added; wrap <fstab.h> functions: getfsent(3), getfsfile(3), 
	  getfsspec(3).
	* map.c: Add new conversion functions for SyslogOptions, SyslogFacility, 
	  SyslogLevel; see syslog(3) for details.
	* map.h: Add new conversion functions and values for SyslogOptions, 
	  SyslogFacility, SyslogLevel; see syslog(3) for details.
	* Makefile.am (MPH_SOURCE): add fstab.c, sys-statvfs.c, x-struct-str.c.
	* mph.h: Document location for Mac OS X man page documentation; add
	  MPH_INTERNAL macro for intra-library function calls (for functions that
	  shouldn't be exported from libMonoPosixHelper.so); declare
	  _mph_copy_structure_strings().
	* pwd.c: Use _mph_copy_structure_strings() to copy strings embedded within
	  struct passwd.
	* sys-statvfs.c: Added; wrap <sys/statvfs.h> functions statvfs(2),
	  fstatvfs(2), and (to complicate things) implement (f)statvfs(2) in terms
	  of (f)statfs(2) on Mac OS X (which lacks the -vfs calls).
	* x-struct-str.c: implements _mph_copy_structure_strings(), which is a
	  generalized interface to copy strings between structures (as is needed in
	  pwd.c and fstab.c).

Thu Dec 23 14:58:09 EST 2004 Paolo Molaro <lupus@ximian.com>

	* serial.c: remove mono calls from here: they break the build
	and they don't belong here.

2004-12-21  Chris Toshok  <toshok@ximian.com>

	* serial.c: initial import of System.IO.Ports pinvoke stuff.

	* Makefile.am (MPH_SOURCE): add serial.c.

2004-11-30  Jonathan Pryor  <jonpryor@vt.edu>

	* mph.h: Use <glib.h>, not <glib/gtypes.h>, as the HP/UX compiler needs
	  <glib/gutils.h> to handle the `inline' keyword.

2004-11-27  Miguel de Icaza  <miguel@ximian.com>

	* Makefile.am (MPH_SOURCE): Add macros.c for compatibility with
	the old API (currently the old API would fail).

2004-11-25  Raja R Harinath  <rharinath@novell.com>

	* Makefile.am (MPH_SOURCE): Distribute old-map.h and map.h.

2004-11-18  Jonathan Pryor  <jonpryor@vt.edu>

	* stdio.c: Add fread(3) and fwrite(3) wrappers.

2004-11-16  Jonathan Pryor  <jonpryor@vt.edu>

	* Makefile.am: Remove sys-mount.c from the build.
	* sys-mount.c: Delete.  We're not exporting mount-related functionality
	  anymore.  It's not remotely portable, and trying to make it portable is a
	  doomed idea.
	* map.c: Remove mount- and umount-related conversion functions.

2004-11-14  Geoff Norton  <gnorton@customerdna.com>
	
	* mph.h:  Revernt jonp's removal of MPH_ON_BSD define as sys-mount.c
	and unistd.c still check this configuration value.  This allows mono
	to build on *BSD again.

2004-11-12  Jonathan Pryor <jonpryor@vt.edu>

	* dirent.c: Only access members which exist on the target
	  platform.
	* errno.c: Only export strerror_r if it's available.
	* mph.h: Remove MPH_ON_BSD; use the configure checks instead.
	* sys-mman.c: Only export posix_madvise if it's available.
	* unistd.c: Only export sethostid if it's available.

2004-11-08  Jonathan Pryor <jonpryor@vt.edu>

	* Makefile.am: Add sys-sendfile.c to the build.
	* dirent.c, fcntl.c, unistd.c: Remove
	  compile-time checks for -64 apis (pread64, etc.), as they're
	  superfluous.  GLibc #defines the functions to the appropriate
	  -64 counterpart when necessary, and Darwin is intrinsically
	  large-file-aware, so manual checking on my part is redundant and
	  unnecessary.
	* grp.c: Add checks for non-portable functions getgrnam_r,
	  getgrgid_r.
	* pwd.c: Add checks for non-portable functions getpwnam_r,
	  getpwuid_r.
	* map.c: Remove <poll.h> include.  Building on Tiger (Mac
	  OS X 10.4 beta) breaks when both <poll.h> and <sys/poll.h> are
	  included, so only use <sys/poll.h>.
	* mph.h: Clean up macro handling for type overflow checking.

2004-11-05  Jonathan Pryor <jonpryor@vt.edu>

	* .cvsignore: Ignore generated files.
	* Makefile.am: Add new INCLUDE directives (for glib
	  headers), source; bump library version (so we don't clobber
	  previous versions of libMonoPosixHelper.so).
	* dirent.c: New file; <dirent.h> wrapper functions; 
	  BSD portability fixes.
	* errno.c: New file; <errno.h> wrapper functions
	* fcntl.c: New file; <fcntl.h> wrapper functions;
	  BSD portability fixes.
	* grp.c: New file; <grp.h> wrapper functions;
	  BSD portability fixes.
	* map.c: Updated macro mapping functions (more enums
	  mapped, more error checking, etc.).
	* map.h: Updated macro mapping functions
	* old-map.c: Previous map.c implementation, for backward
	  compatibility Remove spurious warning about redefining
	  _GNU_SOURCE.
	* old-map.h: Previous map.h implementation, for backward
	compatibility
	* mph.h: New file; Utility types, macros;
	  BSD portability fixes.
	* pwd.c: New file; <pwd.h> wrapper functions;
	  BSD portability fixes.
	* stdio.c: New file; <stdio.h> wrapper functions
	* stdlib.c: New file; <stdlib.h> wrapper functions
	* sys-mman.c: New file; <sys/mman.h> wrapper functions
	* sys-mount.c: New file; <sys/mount.h> wrapper functions;
	  BSD portability fixes.
	* sys-sendfile.c: New file; <sys/sendfile.h> wrapper
	  functions; BSD portability fixes.
	* sys-stat.c: New file; <sys/stat.h> wrapper functions
	* sys-wait.c: New file; <sys/wait.h> wrapper functions
	* time.c: New file; <time.h> wrapper functions;
	  BSD portability fixes.
	* unistd.c: New file; <unistd.h> wrapper functions;
	  BSD portability fixes.
	
